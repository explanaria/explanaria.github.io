<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="../favicon.ico"/>
  <title>Explanarian - Winding Number</title>
  <script src="../src/lib/three.js"></script>
  <script src="../src/lib/socket.io.js"></script>
  <script src="../src/lib/OrbitControls.js"></script>
  <script src="../build/explanaria-bundle.js"></script>


  <link type="text/css" rel="stylesheet" href="../src/style.css" />

  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>
<body>
  <script>
	var three = new Threeasy_Setup(true, 60,15);
	var controls = new THREE.OrbitControls(three.camera,three.renderer.domElement);

	console.log("Loaded.");

	try{window.screen.lockOrientation('landscape');}catch{}
	//curve
	var a2 = new EXP.Area({bounds: [[0,2*Math.PI]], numItems: 20});
	var id = new EXP.Transformation({'expr': (i,t,x) => [x,0,0]});
	var output = new EXP.PointOutput({width:0.2});
	var windingLine = new EXP.LineOutput({width: 5, opacity: 0});

	var a3 = new EXP.Area({bounds: [[0,2*Math.PI]], numItems: 20});
	var id2 = new EXP.Transformation({'expr': (i,t,x) => [x,0,Math.sin(x)]});
	var output2 = new EXP.PointOutput({width:0.2});
	var windingLine2 = new EXP.LineOutput({width: 5, opacity: 0});

	a2.add(id).add(output);
	id.add(windingLine);

	a3.add(id2).add(output2);
	id.add(windingLine2);


	var a4 = new EXP.Area({bounds: [[-5,5],[-5,5]], numItems: 20})
	var t4 = new EXP.Transformation({'expr': (i,t,x,y) => [x,y,0]});
	a4.add(t4).add(new EXP.PointOutput({color: 0x333333, width: 0.2}));


	three.on("update",function(time){
		a2.activate(time.t);
		a3.activate(time.t);
		a4.activate(time.t);
		controls.update();
	});

	async function animate(){

		await delay(5000);

		TransitionTo(t4, {'expr': (i,t,x,y) => [x, y, Math.sin(x)]});

		await delay(2500);

		TransitionTo(t4, {'expr': (i,t,x,y) => [x, y, 0]});

		await delay(2500);

		TransitionTo(id, {'expr': (i,t,x,y) => [Math.cos(x), Math.sin(x), 0]});
		TransitionTo(id2, {'expr': (i,t,x,y) => [Math.cos(x), Math.sin(x), Math.sin(Math.cos(x))]});
		await delay(4000);

	}
	animate();
  </script>
	<div id="label" class="exp-label exp-math" style="opacity: 0">
		Winding number = 6
	</div>
</body>
</html>
